<!-- ****** Breadcumb Area Start ****** -->
<div class="breadcumb-area" style="background-image: url(../../../../../assets/img/bg-tarifario.jpg);">
  <div class="container h-100">
    <div class="row h-100 align-items-center">
      <div class="col-12">
        <div class="bradcumb-title text-center">
          <h2>{{titulo}}</h2>
        </div>
      </div>
    </div>
  </div>
</div>
<br />
<!-- ****** Breadcumb Area End ******-->

<div class="container">
  <div class="card border-dark" style="margin-bottom: 2%; margin-top: 0.5%;">
    <div class="card-body text-primary">
      <div class="my-2 text-center">
        <!-- Button trigger modal -->
        <button type="button" (click)='limpiarTarifaSeleccionadaEnModal()' class="btn btn-primary" data-toggle="modal"
          data-target="#modalCrearActualizar">
          Crear Tarifa
        </button>
      </div>
      <div class="table-responsive">
        <table id="table" class="table table-bordered table-striped" *ngIf="tarifas?.length>0">
          <thead class="thead-dark">
            <tr>
              <th style="text-align: center">Llave</th>
              <th style="text-align: center">Valor</th>
              <th style="text-align: center">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let tarifa of tarifas">
              <td class="text-center" style="color: black">{{tarifa.llave}}</td>
              <td class="text-center" style="color: black">{{tarifa.valor}}</td>
              <td>
                <div class="row">
                  <div class="col text-center">
                    <div><a style="cursor: pointer" (click)='cargarTarifaSeleccionadaEnModal(tarifa.id)'
                        data-toggle="modal" data-target="#modalCrearActualizar"><img class="iconosTamanio"
                          src="../../../../assets/img/iconos/edit.png"></a></div>
                  </div>
                  <div class="col text-center">
                    <div><a style="cursor: pointer" (click)='eliminarTarifa(tarifa)'><img class="iconosTamanio"
                          src="../../../../assets/img/iconos/delete.png"></a></div>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="divNoRegistros" *ngIf="tarifas?.length==0" class="alert alert-info">
        No hay registros en la base de datos.
      </div>
    </div>
  </div>
</div>


<!-- MODAL DE ACTUALIZAR Y CREAR-->
<div class="modal fade" id="modalCrearActualizar" tabindex="-1" role="dialog"
  aria-labelledby="modalCrearActualizarTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">{{tarifaCrearActualizar.id == null? 'Crear Tarifa': 'Actualizar tarifa'}}</h5>
        <button id="btnCerrarModalCrearActualizar" type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form #tarifaForm="ngForm">
        <div class="modal-body">
          <div class="container">
            <div class="row">
              <!--LLAVE-->
              <div class="col-1.5">
                <label for="llave" style="font-weight: bold;" class="col-form-label">Tarifa:</label>
              </div>
              <div class="col-7">
                <input id="inputLlave" type="text" class="form-control" [(ngModel)]="tarifaCrearActualizar.llave"
                  name="llave" required #llave="ngModel">
                <div id="avisoRq1" class="alert alert-danger" *ngIf="llave.invalid && (llave.dirty || llave.touched)"
                  style="width:100%">
                  <div *ngIf="llave?.errors?.required" style="width:100%">
                    La tarifa es requerida
                  </div>
                </div>
              </div>
            </div>
            <br />
            <div class="row">
              <!--VALOR-->
              <div class="col-1.5">
                <label for="valor" style="font-weight: bold;" class="col-form-label">Valor:</label>
              </div>
              <div class="col-7">
                <input id="inputValor" type="number" class="form-control" [(ngModel)]="tarifaCrearActualizar.valor"
                  name="valor" required #valor="ngModel" />
                <div id="avisoRq2" class="alert alert-danger" *ngIf="valor.invalid && (valor.dirty || valor.touched)"
                  style="width:100%">
                  <div *ngIf="valor?.errors?.required" style="width:100%">
                    El valor es requerido
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="btnEliminar" type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
          <!--<button id="btnCrearActualizar" type="button" class="btn btn-primary" (click)='create()'>Guardar</button>-->
          <button id="crearTiquete" *ngIf="!tarifaCrearActualizar.id; else elseBlock" class="btn btn-primary"
            style="margin-left: 1%;" role="button" (click)='create()' [disabled]="!tarifaForm.valid">Crear</button>
          <ng-template #elseBlock>
            <button id="actualizarTiquete" class="btn btn-primary" style="margin-left: 1%;" role="button"
              [disabled]="!tarifaForm.valid" (click)='update()'>Actualizar</button>
          </ng-template>
        </div>
      </form>
    </div>
  </div>
</div>